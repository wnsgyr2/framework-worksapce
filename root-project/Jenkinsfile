pipeline {
  agent any

  stages {
    stage('Checkout') {
      steps {
        checkout scm

        // ✅ Jenkins가 실제로 체크아웃한 커밋 확인
        sh 'git rev-parse HEAD'
        sh 'git log -1 --oneline'
      }
    }

    stage('Verify framework with samples') {
      steps {
        dir('root-project') {
          // ✅ 지금 위치/파일 존재 확인
          sh 'pwd'
          sh 'ls -al'
          sh 'ls -al pom.xml'
          sh 'ls -al integration-test/pom.xml'

          // ✅ 빌드
          sh 'mvn -U clean verify'
        }
      }
    }
  }
}
